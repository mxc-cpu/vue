import{e as B}from"./articleApi-bc2a9a63.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";import{K as R,n as U,q as P,a as o,h as V,r as g,b as x,o as Y,d as z,e as a,u as l,t as r,f as d,w as f}from"./index-e5993185.js";import{Y as H,D as E}from"./upvoteApi-b657f991.js";import{l as F}from"./StoreLogin-90de31fe.js";import{Y as K,A as T,D as G}from"./collectAip-63cac197.js";import{F as j}from"./FileLike-8cc43e54.js";import{S as J}from"./Star-43da5ba9.js";import{u as O}from"./use-message-c50f49d6.js";const Q={setup(){return{}}},W=R('<article class="media" data-v-7730390f><figure class="media-left" data-v-7730390f><p class="image is-64x64" data-v-7730390f><img src="https://bulma.io/images/placeholders/128x128.png" data-v-7730390f></p></figure><div class="media-content" data-v-7730390f><div class="field" data-v-7730390f><p class="control" data-v-7730390f><textarea class="textarea" placeholder="Add a comment..." data-v-7730390f></textarea></p></div><div class="field" data-v-7730390f><p class="control" data-v-7730390f><button class="button" data-v-7730390f>Post comment</button></p></div></div></article><article class="media" data-v-7730390f><figure class="media-left" data-v-7730390f><p class="image is-64x64" data-v-7730390f><img src="https://bulma.io/images/placeholders/128x128.png" data-v-7730390f></p></figure><div class="media-content" data-v-7730390f><div class="content" data-v-7730390f><p data-v-7730390f><strong data-v-7730390f>Barbara Middleton</strong><br data-v-7730390f> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis porta eros lacus, nec ultricies elit blandit non. Suspendisse pellentesque mauris sit amet dolor blandit rutrum. Nunc in tempus turpis. <br data-v-7730390f><small data-v-7730390f><a data-v-7730390f>Like</a> · <a data-v-7730390f>Reply</a> · 3 hrs</small></p></div><article class="media" data-v-7730390f><figure class="media-left" data-v-7730390f><p class="image is-48x48" data-v-7730390f><img src="https://bulma.io/images/placeholders/96x96.png" data-v-7730390f></p></figure><div class="media-content" data-v-7730390f><div class="content" data-v-7730390f><p data-v-7730390f><strong data-v-7730390f>Sean Brown</strong><br data-v-7730390f> Donec sollicitudin urna eget eros malesuada sagittis. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Aliquam blandit nisl a nulla sagittis, a lobortis leo feugiat. <br data-v-7730390f><small data-v-7730390f><a data-v-7730390f>Like</a> · <a data-v-7730390f>Reply</a> · 2 hrs</small></p></div></div></article><article class="media" data-v-7730390f><figure class="media-left" data-v-7730390f><p class="image is-48x48" data-v-7730390f><img src="https://bulma.io/images/placeholders/96x96.png" data-v-7730390f></p></figure><div class="media-content" data-v-7730390f><div class="content" data-v-7730390f><p data-v-7730390f><strong data-v-7730390f>Kayli Eunice </strong><br data-v-7730390f> Sed convallis scelerisque mauris, non pulvinar nunc mattis vel. Maecenas varius felis sit amet magna vestibulum euismod malesuada cursus libero. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Phasellus lacinia non nisl id feugiat. <br data-v-7730390f><small data-v-7730390f><a data-v-7730390f>Like</a> · <a data-v-7730390f>Reply</a> · 2 hrs</small></p></div></div></article></div></article>',2);function X(S,I,c,i,s,p){return W}const Z=N(Q,[["render",X],["__scopeId","data-v-7730390f"]]);const aa={class:"card"},ea={class:"card-image"},ta={class:"image is-3by1"},sa=["src"],la={class:"hero is-link"},ia={class:"hero-body container"},oa={class:"title is-2"},da={class:"title is-6"},ca={class:"card-content content container"},na=["innerHTML"],ra={class:"card-content"},ua={class:"media"},va={class:"columns is-desktop"},fa={style:{display:"inline-block",width:"auto"}},ma={style:{"font-size":"16px"}},pa={style:{display:"inline-block",width:"auto"}},_a=a("div",{class:"hero is-info is-small"},[a("div",{class:"hero-body container"},[a("p",{class:"title is-4 container"},"评论")])],-1),ha={class:"card-content"},y="hsl(344, 95%, 61%)",m="#DCDCDC",k="hsl(48, 100%, 67%)",Sa={__name:"ArticleDetail",setup(S){U();const I=P();o("sssssssssssssssssddddddddddddddddddddddddddddddddddddddddd");const c=O(),i=F();let s=o({}),p=o("点赞"),_=o("收藏"),b=o(),u=o(m),v=o(m),h=o(!0),n=o(!1);V(()=>{L()});const L=async()=>{await B(I.params.id).then(e=>{console.log("xxx"),e.data.success==!0?(s.value=e.data.data,b.value=s.value.upvoteSum,q(),M()):console.log("没有找到")}).catch(e=>{console.log("mmmd",e)})},q=()=>{if(i.userId!=null){const e=g({ArticleId:s.value.id,userId:i.userId});H(e).then(t=>{(t.data.success=!0)&&(h.value=t.data.data,h.value?(p.value="以点赞",u.value=y):u.value=m)})}},w=()=>{if(i.userId!=null){const e=g({ArticleId:s.value.id,userId:i.userId});E(e).then(t=>{t.data.success==!0?(b.value+=1,h.value=!0,p.value="以点赞",u.value=y):(u.value=y,c.info(你已经对此文章点过赞了))}).catch(t=>console.error(t))}else c.info("还未登录")},M=()=>{if(i.userId!=null){c.info(s.value.id);const e=g({ArticleId:s.value.id,userId:i.userId});K(e).then(t=>{(t.data.success=!0)&&(n.value=t.data.data,console.log("isCollect",n.value),n.value?(_.value="以收藏",v.value=k):v.value=m)})}},$=()=>{if(i.userId!=null){const e=g({ArticleId:s.value.id,title:s.value.title,userId:i.userId});n.value==!1?T(e).then(t=>{c.create(e.ArticleId),t.data.success==!0&&(n.value=!0,_.value="以收藏",c.info(t.data.data),v.value=k)}):G(e).then(t=>{t.data.success==!0&&(n.value=!1,_.value="收藏",v.value=m)})}else c.info("还未登录")};return(e,t)=>{const C=x("n-divider"),D=x("n-icon"),A=x("n-button");return Y(),z("div",aa,[a("div",ea,[a("figure",ta,[a("img",{src:l(s).imageUrl,alt:"Placeholder image"},null,8,sa)])]),a("section",la,[a("div",ia,[a("p",oa,r(l(s).title),1)])]),d(C,null,{default:f(()=>[a("p",da,r(l(s).authorName)+" ∷ "+r(l(s).releaseDate),1)]),_:1}),a("div",ca,[a("div",{innerHTML:l(s).description},null,8,na)]),d(C),a("div",ra,[a("div",ua,[a("div",va,[a("div",fa,[d(A,{class:"column is-1",text:"",onClick:w,disabled:l(h)},{default:f(()=>[d(D,{size:"50",color:l(u)},{default:f(()=>[d(l(j))]),_:1},8,["color"]),a("p",null,r(l(p))+":",1),a("p",ma,r(l(b)),1)]),_:1},8,["disabled"])]),a("div",pa,[d(A,{class:"column is-1",text:"",onClick:$},{default:f(()=>[d(D,{size:"50",color:l(v)},{default:f(()=>[d(l(J))]),_:1},8,["color"]),a("p",null,r(l(_))+":",1)]),_:1})])])])]),_a,a("div",ha,[d(Z)])])}}};export{Sa as default};
